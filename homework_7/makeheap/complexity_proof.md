# Доказательство асимптотической сложности построения кучи

## 1. Асимптотика makeheap_n_log_n: O(N log N)

### Алгоритм
В методе `makeheap_n_log_n` мы используем подход "вставки вверх" (sift-up):
- Начинаем с первого элемента (который уже является валидной кучей размера 1)
- Для каждого следующего элемента выполняем операцию sift-up
- Каждая операция sift-up имеет сложность O(log N), так как в худшем случае элемент всплывает от листа до корня, а высота дерева с N элементами равна ⌊log N⌋
- Тогда в худшем случае мы выполняем N операций sift-up, каждая из которых имеет сложность O(log N), поэтому общая сложность равна O(N log N) (сортированный массив)

$$
T(N) = \sum\limits_{i = 1}^N \log(i) = \log(N!) \leqslant N \log(N) = O(N \log N)
$$

---

## 2. Асимптотика makeheap: O(N)

### Алгоритм
В методе `makeheap` мы используем подход "вставки вниз" (sift-down):
- Считаем, что массив — бинарное дерево, поэтому нам нужно, чтобы `arr[i] <= arr[2*i]` и `arr[i] <= arr[2 * i + 1]`
- Тогда начнем с конца массива, вставляя вниз элементы, чтобы на суффиксе выполнялось условие выше. Тогда каждый i-ый элемент просеится не больше чем на 2**(h - i), где h = ⌊log N⌋ - высота дерева

$$
T(N) = \sum\limits_{i = 1}^N i * 2^{h - i} = 2^h \sum\limits_{i = 1}^N \frac{i}{2^i} \leqslant 2^{h + 1} \approx N
$$

---

#### Примечание

$$
\sum\limits_{i = 1}^{N} \frac{i}{2^i} \leqslant \sum\limits_{i = 1}^{\infty} \frac{i}{2^i} = S
$$

Тогда

$$
\frac{S}{2} = \sum\limits_{i = 2}^{\infty} \frac{i - 1}{2^i}
$$

Вычитаем $S - \frac{S}{2} = \frac{S}{2} = 1$
Так вычитать можно, так как ряд абсолютно сходится (признак Дирихле)
